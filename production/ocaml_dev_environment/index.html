<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="description" content="Charlie Marsh is a programmer and student at Princeton University with major interests in functional programming and machine learning.">
  <meta name="viewport" content="width=device-width">

  <!-- Use title if it's in the page YAML frontmatter -->
  <title>Setting Up Your OCaml Development Environment on OS X
 | Charlie Marsh</title>
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Source+Code+Pro">
  <link href="../static/css/combined.css" rel="stylesheet" type="text/css" />
  <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=ml"></script>
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-36552582-2', 'princeton.edu');
  ga('send', 'pageview');
  </script>
</head>

<body class="index">
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span2 hidden-phone"></div>
      <div class="span2 hidden-phone" style="position:fixed">
        <header>
          <h1 style="font-size:50px"><a class="blank" href="/~crmarsh/">Charlie<br />Marsh</a></h1>
          <p><a class="implicit" href="/~crmarsh/">Home</a> &sdot; <a class="implicit" href="../Charles_Marsh_CV.pdf">CV</a>&sdot; <a class="implicit" href="../about.html">About</a></p>
          <h2>Programmer,<br />student.</h2>
          <p>I'm into functional<br />programming,<br />machine learning,<br /> and other fun stuff.<p>
          <p>Find me on:</p>
          </header>
          <a href="mailto:crmarsh@princeton.edu" class="nav email"></a>
          <a href="http://www.github.com/crm416" class="nav github"></a>
          <a href="http://stackoverflow.com/users/1450892/charles-marsh" class="nav stackoverflow"></a>
          <a href="http://uk.linkedin.com/in/marshcharles" class="nav linkedin"></a>
        </div>
        <div class="span2 visible-phone">
          <div>
            <p style="font-size:25px"><a class="blank" href="/~crmarsh/">Charlie Marsh</a>  <div style="margin-top:-10px"><code class="prettyprint" class="custom"><span class="code_red">type</span> <span class="code_blue">blog</span></code></div></p>
          </div>
          <hr />
        </div>
        <div class="span9 offset1">
          <h1>Setting Up Your OCaml Development Environment on OS X</h1>
<a class="btn btn-primary" href="http://twitter.com/intent/tweet?url=http://www.princeton.edu/~crmarsh/ocaml_dev_environment&text=Setting Up Your OCaml Development Environment on OS X
&via=crm416">Tweet</a> | <a class="btn btn-primary" href="http://facebook.com/sharer.php?u=http://www.princeton.edu/~crmarsh/ocaml_dev_environment">Like</a> | <a class="btn btn-primary" href="https://plus.google.com/share?url=http%3A%2F%2Fwww.princeton.edu/~crmarsh/ocaml_dev_environment">+1</a>

<p>Last fall, I began exploring the subject of functional programming as part of <a href="http://www.cs.princeton.edu/~dpw/">Professor David Walker’s</a> <a href="http://www.cs.princeton.edu/~dpw/courses/cos326-12/info.php">COS 326 at Princeton</a>. Throughout the course, we did all of our programing in OCaml. I also spent the past spring using OCaml for my CS Independent Work. So in total, I’ve spent a reasonable amount of time around the language, and I think it’s fantastic: it’s got a great module system, plenty of useful open source tools, etc.</p>

<p>But OCaml isn’t <em>that</em> widely used. And as a result, there aren’t very many good write-ups out there for setting up an OCaml development environment.</p>

<blockquote>
  <p>In this post, I’ll provide a couple of choices for setting up such an environment when developing on a Mac.</p>
</blockquote>

<h2>Getting the OCaml Source Code</h2>

<p>To start, there are a few ways to get the actual source code for the OCaml language.</p>

<p>If you’re just doing <strong>low-key development</strong>, download the source code as follows:</p>

<ul>
<li>Go to the <a href="http://ocaml.org/releases/">OCaml releases page</a>.</li>
<li>Select the precompiled Mac binary.</li>
<li>Follow the instructions for installation, and you're done—super simple, and fast.</li>
</ul>

<p>If you’re doing any <strong>significant development (i.e., large-scale projects)</strong>, you will eventually need external packages. With that in mind, you’ll want to get the OCaml source code as part of the OCaml Package Manager (OPAM) download. OPAM, as it sounds, is a fantastic OCaml package manager, which can be acquired as follows:</p>

<ul>
<li>If you’re lucky, one of the methods listed on the <a href="http://opam.ocamlpro.com/doc/Quick_Install.html">OPAM site</a> may work for you. This includes installation via homebrew and MacPorts, but I had seemingly random, trivial bugs that caused most of these methods to fail for me.</li>
<li><p>With that in mind, I ran the following code from the <a href="http://ocaml.org/install.html">OCaml installation page</a>:</p>

<pre><code class="prettyprint">$ wget http://www.ocamlpro.com/pub/opam_installer.sh
$ sh ./opam_installer.sh /usr/local/bin
</code></pre></li>
<li><p>Warning: this takes a <strong>really</strong> long time—much longer than the above method because it has to download a bunch of libraries and dependencies.</p></li>
<li>Additionally, if you want to take this route, you’ll need to update your BASH path: ‘export PATH=$PATH:~/.opam/4.00.1/bin’ (or wherever you want your .opam folder located).</li>
</ul>

<p>To make sure that you’ve installed the language properly, open up your Bash terminal and type ‘ocaml’. You should see the toplevel initialize, like this:</p>

<!--?prettify lang=ml?-->

<pre><code>        OCaml version 4.00.1
# let x = 2 in
  let y = 3 in
  x+y;;
- : int = 5
#
</code></pre>

<h2>Setting Up Your Development Environment</h2>

<p>Next, you’ll want a high-quality editor that’s well integrated with the OCaml language. I’ve played around with three different editors/environments, all of which have had their pros and cons. Anyway, the process for setting up such environments is as follows:</p>

<h3>Emacs (with Tuareg Mode)</h3>

<p>Professor Walker was a big fan of playing around in the OCaml toplevel within the IDE. That is, loading your current module into the OCaml toplevel and playing around without having to leave the text editor. To do that, you need Tuareg mode. Follow these instructions:</p>

<ul>
<li>Download the Emacs application for Mac <a href="http://emacsformacosx.com">here</a>.</li>
<li>Open your terminal and type: ‘open ~’</li>
<li><p>Download and unzip <a href="https://forge.ocamlcore.org/frs/download.php/514/tuareg-2.0.4.tgz">Tuareg 2.0.4</a> and <a href="https://forge.ocamlcore.org/frs/download.php/516/tuareg-caml-mode.tar.gz">Tuareg Mode</a> (downloads are hyperlinked). Move them into your home (~) directory. These instructions can be found <a href="http://cs51.seas.harvard.edu/ocaml-install.html#tuareg">here</a>. Alternatively, you can use wget (<a href="http://osxdaily.com/2012/05/22/install-wget-mac-os-x/">good instructions for downloading wget</a>, if you don’t have MacPorts or homebrew):</p>

<pre><code class="prettyprint">$ wget https://forge.ocamlcore.org/frs/download.php/516/tuareg-caml-mode.tar.gz
$ wget https://forge.ocamlcore.org/frs/download.php/514/tuareg-2.0.4.tgz
</code></pre></li>
<li><p>Open Emacs. Type: 'Ctrl+X Ctrl+F .emacs', which should open (or create) your .emacs file (located at ~/.emacs).</p></li>
<li><p>Paste the following code into your .emacs file:</p>

<pre><code class="prettyprint">(add-to-list 'load-path "~/tuareg-caml-mode")
(add-to-list 'load-path "~/tuareg-2.0.4")
(setq auto-mode-alist (cons '("\\.ml\\w?" . tuareg-mode) auto-mode-alist))
(autoload 'tuareg-mode "tuareg" "Major mode for editing Caml code" t)
(autoload 'camldebug "camldebug" "Run the Caml debugger" t)
</code></pre></li>
</ul>

<p>Restart Emacs and Tuareg mode should be up and running. There are a number of useful commands for opening up the OCaml toplevel—<a href="http://www.ocamlpro.com/files/tuareg-mode.pdf">here’s</a> a good cheat sheet.</p>

<h3>Eclipse (with OcaIDE)</h3>

<p>OcaIDE is an Ocaml plugin for Eclipse. It works reasonably well, with auto-completion across packages and all those cute tricks. Here are some step-by-step instructions for setting it up:</p>

<ul>
<li>Download <em>Eclipse IDE for Java and DSL Developers</em> or <em>Eclipse Classic</em> from <a href="http://www.eclipse.org/downloads/">this link</a>.</li>
<li>If you have any experience installing Eclipse plugins this shouldn’t be too hard. You can get the information from <a href="http://www.algo-prog.info/ocaide/install.php">here</a>, but it boils down to the following:</li>
<li>Open your version of Eclipse.</li>
<li>Go to: Help -> Install New Software.</li>
<li>Hit add and enter 'OcaIDE' for name and <a href="http://www.algo-prog.info/ocaide/"><a href="http://www.algo-prog.info/ocaide/">http://www.algo-prog.info/ocaide/</a></a> for URL.</li>
<li>Click through the licensing agreement and unsigned content warnings, as one does.</li>
<li>Restart Eclipse.</li>
</ul>

<p>As an example usage of how you would arrange your folder hierarchy in Eclipse:</p>

<ul>
<li>Download a sample project, e.g., <a href="http://www.cs.princeton.edu/~dpw/courses/cos326-12/ass/a1.tgz">a1 (download)</a>.</li>
<li>Create a COS 326 folder and place a1 inside of it.</li>
<li>Launch eclipse and select COS 326 as your workspace. Type: “command+N –> OCaml –> OCaml Empty Makefile Project”, and all your stuff should be there with the correct perspective activated, as below.</li>
</ul>

<p><img src="http://media.tumblr.com/dcbeeca9a13838be696dcf7b7d04289f/tumblr_inline_mnklabyhIE1qz4rgp.png" class="center"></p>

<p>One issue: the default behavior of Eclipse (with OcaIDE) is to try and re-build every time you save. This gives you error messages like this:</p>

<pre><code class="prettyprint">$ ocamlc -o a1 [a1.ml](http://a1.ml/)
$ make: ocamlc: No such file or directory
$ make: *** [a1] Error 1
</code></pre>

<p>which I’ve struggled to clean up. It also lags your computer for a few seconds.</p>

<p>I find this incredibly annoying, and, to be honest, it doesn't make sense to me that you would want your project to make every time you save: making can be very expensive, and a save isnt really an analogous operation. So I usually disable this feature and handle all my building on my own (i.e., from within my Bash shell). To do so, control-click on <em>a1</em> (or whatever your project is); click 'Properties –> Builders’ and then uncheck ‘OCaml Makefile Builder’ and hit ‘Ok’.</p>

<blockquote>
  <p>NOTE: if you're using OPAM, then you'll have to go to properties (CTRL+,) –> OcaIDE –> Paths. Then, go to ~/.opam/4.00.1/bin, type 'pwd' (you need the full path, rather than '~') and paste the whole path into the ‘OCaml Binaries Directory’ field. Hit apply.</p>
</blockquote>

<h3>Sublime Text</h3>

<p>Sublime Text is great. It’s quick, sexy, and lightweight, with plenty of room for customization. There’s an unlimited free trial available <a href="http://www.sublimetext.com/2">here</a>. It doesn’t have any particular integration with OCaml (although it does provide correct syntax highlighting for your .ml and .mli files), but there’s a fantastic setup tutorial available <a href="http://blog.alexmaccaw.com/sublime-text">here</a> that describes how to get started and recommends some baseline packages.</p>

<h2>In Conclusion</h2>

<p>OCaml is a great language, and I wish it were more widely proliferated. Hopefully, this post will help you get developing as quickly as possible—if anything is unclear, just email me at <a href="mailto:crmarsh@princeton.edu">crmarsh@princeton.edu</a> and I’ll do my best to help you debug.</p>

          <p class="date">Posted on May 29, 2013.<p>
          <div id="disqus_thread"></div>
          <script type="text/javascript">
          var disqus_shortname = 'crmarsh416';
          (function() {
            var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
            dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
            (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
          })();
          </script>
          <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
        </div>
      </div>
    </div>
  </body>
  </html>