<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="description" content="Charlie Marsh is a programmer and student at Princeton University with major interests in functional programming and machine learning.">
  <meta name="viewport" content="width=device-width">
  <title>First Thoughts on OCaml | Charlie Marsh</title>
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Open+Sans">
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Source+Code+Pro">
  <link href="http://crmarsh416.appspot.com/css/combined.css" rel="stylesheet" type="text/css" />
  <link href='https://plus.google.com/u/0/100601164815113053596/' rel='author'>
  <script type="text/javascript" src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=ml"></script>
  <script type="text/javascript" data-no-instant>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
      m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-36552582-2', 'princeton.edu');
    InstantClick.on('change', function() {
      ga('send', 'pageview', location.pathname + location.search);
    });
    InstantClick.init();
  </script>
</head>

<body class="index">
  <div class="container-fluid">
    <div class="row-fluid">
      <div class="span2 hidden-phone"></div>
      <div class="span2 hidden-phone" style="position:fixed">
          <h1 style="font-size:50px"><a class="blank" href="/~crmarsh/">Charlie<br>Marsh</a></h1>
          <p><a class="implicit" href="/~crmarsh/" data-instant>Home</a> &sdot; <a class="implicit" href="../Charles_Marsh_CV.pdf">CV</a>&sdot; <a class="implicit" href="../about.html">About</a></p>
          <h2>Programmer,<br>student.</h2>
          <p>I'm into functional<br>programming,<br>machine learning,<br> and other fun stuff.<p>
            <p>Find me on:</p>
          <a href="mailto:crmarsh@princeton.edu" class="nav email"></a>
          <a href="http://www.github.com/crm416" class="nav github"></a>
          <a href="http://stackoverflow.com/users/1450892/charles-marsh" class="nav stackoverflow"></a>
          <a href="http://uk.linkedin.com/in/marshcharles" class="nav linkedin"></a>
        </div>
        <div class="span2 visible-phone">
          <div>
            <p style="font-size:25px"><a class="blank" href="/~crmarsh/">Charlie Marsh</a>  <div style="margin-top:-10px"><code class="custom"><span class="code_red">type</span> <span class="code_blue">blog</span></code></div>
          </div>
          <hr />
        </div>
        <div class="span9 offset1" style="padding-left:20px">
          <h1>First Thoughts on OCaml</h1>
<a class="btn btn-primary" href="http://twitter.com/intent/tweet?url=http://www.princeton.edu/~crmarsh/intro_to_ocaml&text=First Thoughts on OCaml&via=crm416">Tweet</a> | <a class="btn btn-primary" href="http://facebook.com/sharer.php?u=http://www.princeton.edu/~crmarsh/intro_to_ocaml">Like</a> | <a class="btn btn-primary" href="https://plus.google.com/share?url=http%3A%2F%2Fwww.princeton.edu/~crmarsh/intro_to_ocaml">+1</a>

<p style="color:rgb(130,130,130)">N.B.: I wrote this post a few weeks after first using OCaml. Before that, 90% of my programing had been in Java. Looking back on these notes, perhaps a more accurate title would be "First Thoughts on a Functional Language After Only Knowing OOP", or something along those lines. But for posterity, I'll leave it as-is.</p>

<p>I’ve been learning to program in OCaml for one of my courses this semester (<a href="http://www.cs.princeton.edu/~dpw/courses/cos326-12/info.php" title="COS 326">COS 326: Functional Programming</a>) and I can't remember the last time I was this excited about anything CS-related. Learning to program functionally is like learning to program all over again.</p>

<p>In this post, I’m going to touch on some of the features that make OCaml beautiful to me. In particular, I’m going to contrast these features with their Java counterparts—I think most of the observations made will generalize to the broader question of functional vis-à-vis objective-oriented/imperative, but I’m sure there are a few outliers given any specific language. Also note that I’m sticking to the functional subset of OCaml (the language incorporates some objective-oriented and imperative features, but you can get by without using them at all if you so desire).</p>

<h2 id='type-definitions'>Type definitions<a class="headerlink" href="#type-definitions" title="Permalink to this headline">¶</a></h2>

<p>OCaml makes it unbelievably easy to define new types. As a simple example, say we're making a phone book and we need to define a type for entries in said book. For each entry, we'd want a <em>first name</em>, a <em>last name</em>, and a <em>phone number</em>. For demonstration's sake, lets say we also want an <em>age</em>. All of this would be pretty straightforward in OCaml:</p>

<!--?prettify lang=ml?-->

<pre><code>type first_name = string
type last_name = string
type full_name = first_name * last_name
type age = int
type phone_number = string
type entry = full_name * age * phone_number
</code></pre>

<p>The '*' operator allosw us to create tuples. So 'int * int' indicates a tuple of two integers. Also note that we can use our types when defining types later on (e.g., 'full_name = first_name * last_name').</p>

<p>Most of what’s happening here can be read out-loud: a 'first_name' is just a string; a 'name' is just a first name and a last name; an 'age' is just an integer; and a phone book entry just brings these things together. Brilliant.</p>

<p>As an example from one of my <a href="https://github.com/crm416/OCaml-SAT-Solvers" title="SAT Solvers">recent projects</a>, what about the construction of a module to solve <a href="http://en.wikipedia.org/wiki/Boolean_satisfiability_problem">SAT problems</a> using statements in <a href="http://en.wikipedia.org/wiki/Conjunctive_normal_form">conjunctive normal form</a>. In Java, you would need to create a class ‘clause’, which has a private class ‘literal’, which might have a private class ‘symbol’—oh, and then you’d need to create a class CNF which has, as one of its fields, an array of clauses. I can see this boiling down to roughly 30 lines of code just for outlining your type definitions. In OCaml, we can cover all of this ground with:</p>

<!--?prettify lang=ml?-->

<pre><code>type symbol = string
type literal = symbol * bool
type clause = literal list
type cnf = clause list
</code></pre>

<p>Again: easy to follow.</p>

<p>Better yet, we can define types recursively. This lets us <strong>can define a binary tree in one line of code</strong>:</p>

<!--?prettify lang=ml?-->

<pre><code>type tree = Leaf | Node of int *  tree * tree
</code></pre>

<p>This is saying that a tree is either a leaf, or a node with some value and two subtrees. That is the entire definition. Again, brilliant.</p>

<h2 id='generics'>Generics<a class="headerlink" href="#generics" title="Permalink to this headline">¶</a></h2>

<p>We can make our tree generic with:</p>

<!--?prettify lang=ml?-->

<pre><code>type ‘a tree = Leaf | Node of ‘a * ‘a tree * ‘a tree
</code></pre>

<p>Think about how much time would be spent in Java handling the Integer or Object wrapper classes—all of that is ignore dwith the ‘a semantic in OCaml, which lets you fill in the type later (the type checker will still detect type mismatches! E.g., if you attempt to add a char tree as a subtree of an int tree, you will get a compile-time error). </p>

<p>The handling of generic types in OCaml really couldn’t be easier.</p>

<h2 id='option-types'>Option types<a class="headerlink" href="#option-types" title="Permalink to this headline">¶</a></h2>

<p>OCaml also provides a framework for handling what in Java might be called the Null case through its option types. By specificying a variable as
    type ‘a option
(e.g.,
    int option
), that variable can then either take on the form
    None
or
    Some ‘a.</p>

<p>For example, if x is of type int option, then x can either be None or Some int (e.g., Some 12, Some -1, Some 0). This becomes very useful, very quickly: think about functions in which you may want to return nothing (due to some bad input) but would prefer not to throw an exception. With the option type, we’re able to avoid all the extreme dangers that you see so often in C regarding null pointers and the general disruption that null values can cause.</p>

<h2 id='the-thought-process'>The Thought Process<a class="headerlink" href="#the-thought-process" title="Permalink to this headline">¶</a></h2>

<p>An example that really instilled in me an appreciation for OCaml came when attempting to check whether two lists are of equal length. The function looks like this: </p>

<!--?prettify lang=ml?-->

<pre><code>let equal_length l1 l2 : bool =
   match (l1, l2) with
        ([], []) -&gt; true
       | ([], _) -&gt; false
       | (_, []) -&gt; false
       | (_::tl1, _::tl2) -&gt; equal_length tl1 tl2
</code></pre>

<p>The semantics can be ignored, but the basic premise is that we continue to pull one item at a time off the two lists until they are either both empty (in which case the lengths must be equal) or one is empty and the other is not (in which case the lengths must not be equal).</p>

<p>To me, this was a great example of how OCaml trains programmers to think both deeply and recursively: here, we established an invariant (“we will take one item at a time off both lists”), and from that we were able to reach conclusions given the structure of the resulting lists.</p>

<p>OCaml is constantly training you to think recursively, like with the above. I can’t recall a single instance in which I’ve used a for-loop; instead, OCaml provides you with an awesome framework for exercising induction—indeed, in most cases, you’ll recur on the naturally recursive data structures that OCaml provides you with. For example, consider summing a tree of integers using the Tree definition above.</p>

<!--?prettify lang=ml?-->

<pre><code>let sum tree =
  match tree with
      Leaf -&gt; 0
    | (value, left, right) -&gt; value + sum left + sum right
</code></pre>

<p>Here, we’re taking the sum of a node and adding it to the sum of all nodes in each of the node’s two subtrees. Recursion is awesome.</p>

<h2 id='conclusion'>Conclusion<a class="headerlink" href="#conclusion" title="Permalink to this headline">¶</a></h2>

<p>This post ignores a lot of the best or most powerful features of OCaml, but it’s dragged on a little long, so I’ll stop here. For those interested, check out: proving program correctness (according to my professor: conquerable by college students in OCaml, but “still the subject of current research” in Java), currying functions, and pattern matching.</p>

          <p class="date">Posted on October 31, 2012.<p>

            <div style="border-top:rgb(235, 242, 246) 1px solid; padding-top:1rem; padding-left: 12px; padding-bottom:3rem">
              <label for="tlemail"><strong>Get updates when I publish again:</strong></label>
              <form action="https://tinyletter.com/crmarsh" method="post" target="popupwindow" onsubmit="window.open('https://tinyletter.com/crmarsh', 'popupwindow', 'scrollbars=yes,width=800,height=600');return true"><p><input type="text" style="width:280px; float:left; padding-top:5px" name="email" id="tlemail" placeholder="Type your email here..."/></p><input type="hidden" value="1" name="embed"/><input class="fade" type="submit" value="Subscribe" style="float:left; margin-left:20px; box-sizing: border-box; height: 28px; width: auto; display: inline-block; padding: 1.1em 1.37em; cursor: pointer; text-decoration: none; color: rgb(255, 255, 255); font-size: 11px; line-height: 0; font-weight: 300; text-align: center; letter-spacing: 1px; text-transform: uppercase; text-shadow: none; border-radius: 0.2em; border: rgba(0, 0, 0, 0.05) 0.1em solid; -webkit-transition: background 0.3s ease, border-color 0.3s ease; -moz-transition: background 0.3s ease, border-color 0.3s ease; transition: background 0.3s ease, border-color 0.3s ease; color: rgb(255, 255, 255); background-color: rgb(253,151,33);"/></form>
            </div>

            <div id="disqus_thread"></div>
            <script type="text/javascript">
              var disqus_shortname = 'crmarsh416';
              (function() {
                var dsq = document.createElement('script'); dsq.type = 'text/javascript'; dsq.async = true;
                dsq.src = '//' + disqus_shortname + '.disqus.com/embed.js';
                (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
              })();
            </script>
            <noscript>Please enable JavaScript to view the <a href="http://disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
            <a href="http://disqus.com" class="dsq-brlink">comments powered by <span class="logo-disqus">Disqus</span></a>
            <br><br>
            <hr />
            <center>
              &copy; 2014 Charles Marsh
              <a href="feed.xml" style="padding-bottom:15px">
                <img class="icon" src="http://crmarsh416.appspot.com/img/rss.png">
              </a>
            </center>
          </div>
        </div>
      </div>
    <script src="http://crmarsh416.appspot.com/js/instantclick.min.js" data-no-instant></script>
    <script data-no-instant>InstantClick.init();</script>
    </body>
    </html>