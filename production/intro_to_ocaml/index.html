<!DOCTYPE html>
<!--[if lt IE 7]>      <html class="no-js lt-ie9 lt-ie8 lt-ie7"> <![endif]-->
<!--[if IE 7]>         <html class="no-js lt-ie9 lt-ie8"> <![endif]-->
<!--[if IE 8]>         <html class="no-js lt-ie9"> <![endif]-->
<!--[if gt IE 8]><!--> <html class="no-js"> <!--<![endif]-->
<head>
  <meta charset="utf-8">

  <!-- Always force latest IE rendering engine or request Chrome Frame -->
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="description" content="Charlie Marsh is a programmer and student at Princeton University with major interests in functional programming and machine learning.">
  <meta name="viewport" content="width=device-width">

  <!-- Use title if it's in the page YAML frontmatter -->
  <title>An Introduction to OCaml
 | Charlie Marsh</title>
  <link rel="stylesheet" type="text/css" href="http://fonts.googleapis.com/css?family=Noticia+Text">
  <link href="../static/css/bootstrap.min.css" rel="stylesheet">
  <link href="../static/css/styles.css" rel="stylesheet">
  <link href="../static/css/skeleton.css" media="screen" rel="stylesheet" type="text/css" />

</head>

<body class="index">
  <div class="container">
    <div id="sidebar" class="four columns" style="margin-left:-50px">
      <header>
        <h1 style="font-size:50px"><a class="blank" href="../index.html">Charlie Marsh</a></h1>
        <p><a class="implicit" target="_blank" href="../index.html">Home</a> &sdot; <a class="implicit" target="_blank" href="../about.html">About Me</a></p>
        <h2>Programmer, student.</h2>
        <p>I'm into functional programming,<br /> machine learning,<br /> and other fun stuff.<p>
          <p>Find me on:</p>
        </header>
        <a href="mailto:crmarsh@princeton.edu"><img src="../static/img/email.png"></a>
        <a href="http://www.github.com/crm416"><img src="../static/img/github.png"></a>
        <a href="http://stackoverflow.com/users/1450892/charles-marsh"><img src="../static/img/stackoverflow.png"></a>
        <a href="uk.linkedin.com/in/marshcharles"><img src="../static/img/linkedin.png"></a>
      </div>
      <div class="four columns">&nbsp;
      </div>
      <div id="body" class="twelve columns">
        <section class='thing row' style="margin-top:-22px">
          <h1>An Introduction to OCaml</h1>

<p>I’ve been learning to program in OCaml for one of my courses this semester (<a href="http://www.cs.princeton.edu/~dpw/courses/cos326-12/info.php" title="COS 326">COS 326: Functional Programming</a>) and I can't remember the last time I was this excited about anything CS-related. Learning to program functionally is like learning to program all over again.</p>

<p>In this post, I’m going to touch on some of the features that make OCaml beautiful to me. In particular, I’m going to contrast these features with their Java counterparts—I think most of the observations made will generalize to the broader question of functional vis-à-vis objective-oriented/imperative, but I’m sure there are a few outliers given any specific language. Also note that I’m sticking to the functional subset of OCaml (the language incorporates some objective-oriented and imperative features, but you can get by without using them at all if you so desire).</p>

<h2>Type definitions</h2>

<p>OCaml makes unbelievably easy to define new types. Take, for example, the construction of a module to solve SAT problems using statements in conjunctive normal form. In Java, you would need to create a class ‘clause’, which has a private class ‘literal’, which might have a private class ‘symbol’—oh, and then you’d need to create a class CNF which has, as one of its fields, an array of clauses. I can see this boiling down to roughly 30 lines of code just for outlining your type definitions. In OCaml, we can cover all of this ground with:</p>

<pre><code class="prettyprint lang-ml">type symbol = string
type literal = symbol * bool
type clause = literal list
type cnf = clause list
</code></pre>

<p>Most of what’s happening here can be read out-loud: a ‘symbol’ is just a string; a literal is just a ‘symbol’ and a Boolean (i.e., negated or not); a clause is just a list of literals; and a CNF is just a list of clauses. Brilliant. (See <a href="https://github.com/crm416/OCaml-SAT-Solvers" title="SAT Solvers">here</a> for some work I did on OCaml SAT solvers.)</p>

<p>Better yet, <strong>we can define a binary tree in one line</strong>:</p>

<pre><code class="prettyprint lang-ml">type tree = Leaf | Node of int *  tree * tree
</code></pre>

<p>This is saying that a tree is either a leaf, or a node with some value and two subtrees. That is the entire definition.</p>

<h2>Generics</h2>

<p>We can make our tree generic with:</p>

<pre><code class="prettyprint lang-ml">type ‘a tree = Leaf | Node of ‘a * ‘a tree * ‘a tree
</code></pre>

<p>Think about how much time would be spent in Java handling the Integer or Object wrapper classes—all of that is ignore dwith the ‘a semantic in OCaml, which lets you fill in the type later (the type checker will still detect type mismatches! E.g., if you attempt to add a char tree as a subtree of an int tree, you will get a compile-time error). </p>

<p>The handling of generic types in OCaml really couldn’t be easier.</p>

<h2>Option types</h2>

<p>OCaml also provides a framework for handling what in Java might be called the Null case through its option types. By specificying a variable as
    type ‘a option
(e.g.,
    int option
), that variable can then either take on the form
    None
or
    Some ‘a.</p>

<p>For example, if x is of type int option, then x can either be None or Some int (e.g., Some 12, Some -1, Some 0). This becomes very useful, very quickly: think about functions in which you may want to return nothing (due to some bad input) but would prefer not to throw an exception. With the option type, we’re able to avoid all the extreme dangers that you see so often in C regarding null pointers and the general disruption that null values can cause.</p>

<h2>The Thought Process</h2>

<p>An example that really instilled in me an appreciation for OCaml came when attempting to check whether two lists are of equal length. The function looks like this: </p>

<pre><code class="prettyprint lang-ml">let equal_length l1 l2 : bool =
   match (l1, l2) with
        ([], []) -&gt; true
       | ([], _) -&gt; false
       | (_, []) -&gt; false
       | (_::tl1, _::tl2) -&gt; equal_length tl1 tl2
</code></pre>

<p>The semantics can be ignored, but the basic premise is that we continue to pull one item at a time off the two lists until they are either both empty (in which case the lengths must be equal) or one is empty and the other is not (in which case the lengths must not be equal).</p>

<p>To me, this was a great example of how OCaml trains programmers to think both deeply and recursively: here, we established an invariant (“we will take one item at a time off both lists”), and from that we were able to reach conclusions given the structure of the resulting lists.</p>

<p>OCaml is constantly training you to think recursively, like with the above. I can’t recall a single instance in which I’ve used a for-loop; instead, OCaml provides you with an awesome framework for exercising induction—indeed, in most cases, you’ll recur on the naturally recursive data structures that OCaml provides you with. For example, consider summing a tree of integers using the Tree definition above.</p>

<pre><code class="prettyprint lang-ml">let sum tree =
  match tree with
      Leaf -&gt; 0
    | (value, left, right) -&gt; value + sum left + sum right
</code></pre>

<p>Here, we’re taking the sum of a node and adding it to the sum of all nodes in each of the node’s two subtrees. Recursion is awesome.</p>

<h2>Conclusion</h2>

<p>This post ignores a lot of the best or most powerful features of OCaml, but it’s dragged on a little long, so I’ll stop here. For those interested, check out: proving program correctness (according to my professor: conquerable by college students in OCaml, but “still the subject of current research” in Java), currying functions, and pattern matching.</p>

<p class="date">Posted on October 31, 2012.</p>

        </section>
      </div>
    </div>

    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js?lang=ml"></script>
    <script src="//ajax.googleapis.com/ajax/libs/jquery/1.8.0/jquery.min.js"></script>
    <script>window.jQuery || document.write('<script src="/js/vendor/jquery-1.8.0.min.js"><\/script>')</script>
    <script src="/js/all.js" type="text/javascript"></script>

    <script>
    var _gaq = _gaq || [];
    _gaq.push(['_setAccount', 'UA-3525624-10']);
    _gaq.push(['_trackPageview']);

    (function() {
      var ga = document.createElement('script'); ga.type = 'text/javascript'; ga.async = true;
      ga.src = ('https:' == document.location.protocol ? 'https://ssl' : 'http://www') + '.google-analytics.com/ga.js';
      var s = document.getElementsByTagName('script')[0]; s.parentNode.insertBefore(ga, s);
    })();
    </script>
  </body>
  </html>