<!DOCTYPE html>
  <head>
  <meta charset="utf-8">
  <meta content="IE=edge,chrome=1" http-equiv="X-UA-Compatible">
  <meta name="description" content="Code review is critical to our engineering culture at Khan Academy. But where you look at code can greatly influence your comments.">
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <title>Reviewing Code from Both Sides | Charlie Marsh</title>
  <link href="https://fonts.googleapis.com/css?family=Open+Sans:300,600" rel="stylesheet">
  <link href="https://fonts.googleapis.com/css?family=Source+Code+Pro:300" rel="stylesheet">
  <link href="/static/css/bootstrap.min.css" rel="stylesheet" type="text/css" />
  <link href="/static/css/styles.css" rel="stylesheet" type="text/css" />
  <link href="/static/css/styles-mobile.css" rel="stylesheet" type="text/css" media="(max-width: 767px)" />
  <link href="/static/css/syntax.css" rel="stylesheet" type="text/css" />
  <link href="https://plus.google.com/u/0/100601164815113053596/" rel='author'>
  <script>
    (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
    (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
    })(window,document,'script','//www.google-analytics.com/analytics.js','ga');
    ga('create', 'UA-36552582-3', 'auto');
    ga('send', 'pageview');
  </script>
</head>

  <body class="index">
    <div class="container-fluid">
      <div class="row">
  <div class="col-sm-12 hidden-xs">
    <center>
      <h1
        style="font-size:80px; margin-top: 0.5em;margin-bottom:0"
      >
        <a class="implicit" href="/">
          Charlie Marsh
        </a>
      </h1>
      <div style="margin-bottom: 12px">
        <code style="font-size:18px">
          <span class="code-red">type</span> <a class="implicit" href="/all/">blog</a> = <span class="code-orange">Post</span> <span class="code-red">of</span> (<span class="code-blue">string</span> <span class="code-red">*</span> <a class="implicit" href="/all/">blog</a>) | <a class="implicit code-orange" href="/">Home</a> | <a class="implicit code-orange" href="/about/">About</a>
        </code>
      </div>
      <a target="_blank" href="mailto:charlie.r.marsh@gmail.com">Email</a>
      &sdot;
      <a target="_blank" href="http://www.github.com/crm416">GitHub</a>
      &sdot;
      <a target="_blank" href="https://twitter.com/charliermarsh">Twitter</a>
      &sdot;
      <a target="_blank" href="/static/pdf/Charlie_Marsh_Resume.pdf">Résumé</a>
    </center>
    <hr />
  </div>
</div>

      <div class="row">
        <div class="col-sm-10 col-sm-offset-1 col-xs-12">
          
          
          <h1 style="margin-top: 0.25em" id="Reviewing-Code-from-Both-Sides">
            <a class="implicit" href="#Reviewing-Code-from-Both-Sides">
              Reviewing Code from Both Sides
            </a>
          </h1>
          <p>At Khan Academy, code review is a key step in our engineering workflow—we use it as a mechanism for quality control, context sharing, and more. (See: <a href="https://sites.google.com/a/khanacademy.org/forge/for-developers/code-review-policy#TOC-Why-have-code-reviews-" target="_blank">Code reviews at Khan Academy</a>.)</p>

<p>In making the jump from university (I graduated in June) to Real Engineering™, code review was one of my weak points. I hardly knew anything about it. At school, you never review code. On the job, you&#39;re reviewing daily.</p>

<p>With five months of consistent reviewing under my belt, I&#39;ve begun to notice that <em>where</em> I read code influences the types of observations I can and am compelled to make.</p>

<!--break-->

<p>In particular: reading code in a code review tool (we use <a href="http://phabricator.org/" target="_blank">Phabricator</a>) leads me to make different observations than when reading code in an IDE.</p>

<p><h3  id='Reviewing-in-Phabricator'><a class='implicit' href="#Reviewing-in-Phabricator" title="Permalink to this headline">Reviewing in Phabricator</a></h3 ></p>

<p>When reviewing in Phabricator, my comments tend towards smaller issues, be they style nits or more serious edits that nonetheless span just a handful of lines.</p>

<p>Since the visible code is confined to the changed lines, it can be challenging to see the big picture; the tenor of the review is often that of &#39;Thumbs up on the general structure, but we should iron out these wrinkles&#39;.</p>

<p>Yet, as a result of this focused presentation, simple oversights (leftover <code>console.log</code> statements et al.) are made much more obvious in the review tool than in an IDE, since they&#39;re surrounded by just a handful of changed lines and/or highlighted, rather than camouflaged within monotonous files.</p>

<p><h3  id='Reviewing-in-an-IDE'><a class='implicit' href="#Reviewing-in-an-IDE" title="Permalink to this headline">Reviewing in an IDE</a></h3 ></p>

<p>When reviewing in Android Studio or even Sublime, I find it easier to identify opportunities for higher-level refactors and broader structural changes, since I can see the changed files in full, navigate with ease, and, more generally, rely on the same instincts I use when <em>writing</em> code.</p>

<p>In the familiar interface of the IDE, I&#39;m able to put myself in the <em>author&#39;s</em> shoes by moving things around, seeing how they fit together, and so forth. Better yet, I can actually try out my suggestions before presenting them to the author. This leads to fewer &#39;Maybe we could...&#39;-style caveats.</p>

<p>As an added bonus: an IDE can point out changes that your eyes would be strained to detect, like the ability to convert an instance variable to a local variable (though these should probably be caught by a linter anyway).</p>

<p><h3  id='A-Wholistic-Review'><a class='implicit' href="#A-Wholistic-Review" title="Permalink to this headline">A Wholistic Review</a></h3 ></p>

<p>Of course, these are generalizations, and as I&#39;ve grown, the lines have blurred. (In particular, my ability to make high-level observations on the basis of a Phrabicator-read alone has improved—a progression that&#39;s also been influenced by increased familiarity with the codebase.)</p>

<p>Nevertheless, reading code from these two perspectives together has helped me deliver more wholistic reviews, as both sets of comments are useful in their own ways.</p>

<p>My (loose) rule for the past few weeks has thus been to read through any non-trivial changes in both environments. This cuts both ways in that:</p>

<ul>
<li>When writing code, I skim it on Phabricator myself (with <code>arc diff --preview</code>) before submitting the change for review.</li>
<li>When reviewing code, I patch the change in locally (with <code>arc patch {$ID}</code>) and mess around with it in the IDE before submitting my comments.</li>
</ul>

<p>The result: <strong><em>fewer missteps as an author and more substantive feedback as a reviewer</em></strong>.</p>

<p>Code review can be an intimidating and unfamiliar practice, especially to engineers coming straight out of school. If that resonates with you, try adopting this rule—put yourself in the reviewer&#39;s shoes when writing code, and the author&#39;s shoes when reading it—and see what comes out.</p>

<p class="note">Thanks to <a target="_blank" href="http://www.shubhro.com">Shubhro Saha</a> for providing feedback on an earlier draft of this post.</p>

          <p class="date">
            Posted on February 22, 2016.
          </p>
          <div class="hidden-xs">
  <hr />
  <center style="padding-bottom: 20px">
    &copy; 2018 <a href="/" class="implicit">Charlie Marsh</a>
  </center>
</div>

        </div>
      </div>
    </div>
  </body>
</html>
